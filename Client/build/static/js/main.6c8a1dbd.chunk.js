(window["webpackJsonploftschool-nodejs-project"]=window["webpackJsonploftschool-nodejs-project"]||[]).push([[0],{220:function(e,t,a){e.exports=a(364)},276:function(e,t){},364:function(e,t,a){"use strict";a.r(t);var n,r,c,i,o,s,l,u,m,d=a(0),p=a.n(d),f=a(12),h=a.n(f),b=a(17),g=a(18),E=a(20),O=a(19),v=a(21),j=a(59),w=a(8),N=a(191),x=a.n(N),y=a(7),S=a(136),C=a(421),k=a(26),T=a(192),A=a.n(T),P=a(64),I=a(420),_=Object(I.a)({OPEN_NOTIFICATION:function(e){return e},CLOSE_NOTIFICATION:function(e){return e}},{prefix:"notifications"}),R=_.openNotification,D=_.closeNotification,L=function(e){return e.notifications},U=Object(C.a)((n={},Object(y.a)(n,R,(function(e,t){var a=t.payload,n=a.text,r=a.variant;return[].concat(Object(P.a)(e),[{text:n,variant:r,id:e.length+1,isActive:!e.length}])})),Object(y.a)(n,D,(function(e,t){var a=e.filter((function(e){return e.id!==t.payload}));return a.length?a.map((function(e,t){return t===a.length-1&&(e.isActive=!0),e})):a})),n),[]),F=U,H=A.a.create({baseURL:"http://localhost:5000/api/"}),W=[],M=!1,B=function(e){var t=e.url,a=e.method,n=e.data,r=e.headers,c=void 0===r?{}:r,i=e.isRefresh,o=e.isWithoutToken,s=e.getState,l=void 0===s?function(){return{}}:s,u=e.dispatch,m=void 0===u?function(){}:u;return new Promise((function(e,r){var s=q(l()),u=s.accessToken,d=s.accessTokenExpiredAt,p=s.refreshTokenExpiredAt,f=function(e){var t=e.url,a=e.method,n=e.headers,r=e.data,c=e.resolve,s=e.reject;if(!o){var u=q(l()),d=u.accessToken,p=u.refreshToken;n.Authorization=i?p:d}return H({url:t,method:a,headers:n,data:r}).then((function(e){c(e.data)})).catch((function(e){if(!e.response)return m(R({variant:"error",text:"Error!!\n".concat(e.message)})),s(e.message);var a=e.response.status||404,n=e.response.data;switch(console.group("Error from: "+t),console.info("Status: "+a),console.dir(n),console.groupEnd(),a){case 401:case 403:return m(ie()),s(n);case 500:case 502:case 503:return m(R({variant:"error",text:"".concat(a,"!\nSomething is wrong))")})),s({detail:"Unknown error"});default:return s(n)}}))},h=d<=Date.now(),b=p<=Date.now();u&&h&&!b&&!o?(!i&&W.push({url:t,method:a,data:n,headers:c,isRefresh:i,resolve:e,reject:r}),i||M?i&&f({url:t,method:a,data:n,headers:c,resolve:e,reject:r}):(M=!0,m(ce()).then((function(){M=!1,W.forEach((function(e){return f(e)}))})).catch((function(){m(ie()),r({detail:"Refresh token error"})})))):b&&!o?(m(ie()),r({detail:"Refresh token is expired"})):f({url:t,method:a,data:n,headers:c,resolve:e,reject:r})}))},G=function(e){return e.auth.userProfile},z=function(e){return e.auth.permissions},q=function(e){return e.auth.tokens},V=function(e){return!!e.auth.tokens.accessToken},X=function(e){return e.auth.isLoadingUserProfile},J=(Object(S.a)("".concat("AUTH","/LOGIN_USER_REQUEST")),Object(S.a)("".concat("AUTH","/REGISTRATION_USER_REQUEST")),Object(S.a)("".concat("AUTH","/SET_PROFILE_DATA"))),Z=Object(S.a)("".concat("AUTH","/SET_TOKEN_DATA")),Q=Object(S.a)("".concat("AUTH","/LOGOUT_USER")),Y=Object(S.a)("".concat("AUTH","/SET_IS_LOADING_USER_PROFILE")),K=Object(C.a)(Object(y.a)({},Y,(function(e,t){return t.payload})),!1),$=Object(C.a)((r={},Object(y.a)(r,J,(function(e,t){var a=t.payload,n=a.id,r=a.image,c=a.middleName,i=a.surName,o=a.username;return{id:n,image:r,firstName:a.firstName,middleName:c,surName:i,username:o}})),Object(y.a)(r,Q,(function(){return null})),r),null),ee={chat:{C:!1,D:!1,R:!1,U:!1},news:{C:!1,D:!1,R:!1,U:!1},settings:{C:!1,D:!1,R:!1,U:!1}},te=Object(C.a)((c={},Object(y.a)(c,J,(function(e,t){return t.payload.permission})),Object(y.a)(c,Q,(function(){return ee})),c),ee),ae=Object(C.a)((i={},Object(y.a)(i,Z,(function(e,t){var a=t.payload;return{accessToken:a.accessToken,accessTokenExpiredAt:a.accessTokenExpiredAt,refreshToken:a.refreshToken,refreshTokenExpiredAt:a.refreshTokenExpiredAt}})),Object(y.a)(i,Q,(function(){return{accessToken:null,accessTokenExpiredAt:null,refreshToken:null,refreshTokenExpiredAt:null}})),i),{accessToken:null,accessTokenExpiredAt:null,refreshToken:null,refreshTokenExpiredAt:null}),ne=Object(k.c)({userProfile:$,permissions:te,tokens:ae,isLoadingUserProfile:K}),re=function(){return function(e,t){var a=localStorage.getItem("token-data");a&&(e(Z(JSON.parse(a))),B({url:"/profile",method:"GET",dispatch:e,getState:t}).then((function(t){e(J(t))})).catch((function(e){})))}},ce=function(){return function(e,t){return new Promise((function(a,n){B({url:"/refresh-token",method:"POST",isRefresh:!0,dispatch:e,getState:t}).then((function(t){e(Z(t)),a(a)})).catch((function(e){return n(e)}))}))}},ie=function(){return function(e){localStorage.removeItem("token-data"),e(Q()),R({text:"\u0412\u044b \u0432\u044b\u0448\u043b\u0438 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b",variant:"info"})}},oe=function(e){var t=e.firstName,a=e.surName,n=e.middleName,r=e.oldPassword,c=e.newPassword,i=e.avatar;return function(e,o){return new Promise((function(s){var l=new FormData;l.append("firstName",t),l.append("surName",a),l.append("middleName",n),l.append("oldPassword",r),l.append("newPassword",c),l.append("avatar",i),e(Y(!0)),B({url:"/profile",method:"PATCH",data:l,getState:o,dispatch:e}).then((function(t){e(J(t)),e(R({text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d!",variant:"success"})),s(!0)})).catch((function(t){return e(R({text:t.message,variant:"error"}))})).finally((function(){return e(Y(!1))}))}))}},se="/",le="/registration",ue="/news",me="/chat",de="/profile",pe="/admin-panel",fe=Object(w.b)((function(e){return{permissions:z(e),isAuthorized:V(e)}}))((function(e){var t=e.permissionPath,a=e.path,n=e.component,r=e.permissions;return!e.isAuthorized||t&&!x.a.get(r,[t,"R"],!1)?p.a.createElement(j.a,{from:a,to:se}):p.a.createElement(j.b,{path:a,component:n})})),he=a(14),be=a(5),ge=a(418),Ee=a(391),Oe=a(392),ve=a(393),je=a(28),we=a(368),Ne=p.a.forwardRef((function(e,t){return p.a.createElement(je.b,Object.assign({innerRef:t},e))})),xe=Object(j.g)((function(e){var t=e.path,a=e.location,n=e.children,r=e.isRouterLink,c=e.color,i=void 0===c?"primary":c;return p.a.createElement(we.a,{color:r?a.pathname===t?i:"default":i,component:Ne,to:t},n)})),ye=a(32),Se=a.n(ye),Ce=function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"renderAuthorizedNav",value:function(){var e=this.props,t=e.permissions,a=e.profile;return p.a.createElement(p.a.Fragment,null,Se()(t,"news.R",!1)&&p.a.createElement(xe,{path:ue,isRouterLink:!0},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"),Se()(t,"chat.R",!1)&&p.a.createElement(xe,{path:me,isRouterLink:!0},"\u0427\u0430\u0442"),Se()(t,"settings.R",!1)&&p.a.createElement(xe,{path:pe,isRouterLink:!0},"\u0410\u0434\u043c\u0438\u043d\u043a\u0430"),p.a.createElement(xe,{path:de,isRouterLink:!0},a?a.username:""))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isAuthorized;return p.a.createElement("div",null,p.a.createElement(Ee.a,{position:"static",color:"default",className:t.appBar},p.a.createElement(Oe.a,null,p.a.createElement(ve.a,null,p.a.createElement("div",{className:t.logo},p.a.createElement("img",{src:"../../assets/img/logo.png",alt:"logo"})),p.a.createElement(xe,{path:se,isRouterLink:!0},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),a?this.renderAuthorizedNav():null))))}}]),t}(d.PureComponent),ke=Object(he.a)(Object(be.a)((function(){return{logo:{flexGrow:1}}})),Object(w.b)((function(e){return{isAuthorized:V(e),permissions:z(e),profile:G(e)}})))(Ce),Te=a(47),Ae=a(62),Pe=a(73),Ie=a(138),_e=a(394),Re=a(424),De=a(395),Le=a(396),Ue=a(397),Fe=Object(be.a)((function(e){return{textField:{display:200,marginBottom:e.spacing(3)}}}))((function(e){var t=e.id,a=e.classes,n=e.handleChange,r=e.value,c=e.label,i=e.required;return p.a.createElement(_e.a,{className:a.textField,required:i},p.a.createElement(Re.a,{htmlFor:"input-"+t},c),p.a.createElement(De.a,{id:"input-"+t,type:"text",value:r,autoComplete:t,onChange:n,startAdornment:p.a.createElement(Le.a,{position:"start"},p.a.createElement(Ue.a,null))}))})),He=a(399),We=a(398),Me=a(400),Be=a(401),Ge=a(50),ze=a.n(Ge),qe=Object(be.a)((function(e){return{textField:{display:200,marginBottom:e.spacing(3)}}}))((function(e){var t=e.id,a=e.classes,n=e.handleChange,r=e.value,c=e.label,i=e.className,o=e.name,s=p.a.useState({showPassword:!1}),l=Object(Pe.a)(s,2),u=l[0],m=l[1];return p.a.createElement(_e.a,{className:ze()(a.textField,i),required:!0},p.a.createElement(Re.a,{htmlFor:t},c),p.a.createElement(De.a,{id:t,autoComplete:t,type:u.showPassword?"text":"password",name:o,value:r,onChange:n,startAdornment:p.a.createElement(Le.a,{position:"start"},p.a.createElement(We.a,null)),endAdornment:p.a.createElement(Le.a,{position:"end"},p.a.createElement(He.a,{"aria-label":"toggle password visibility",onClick:function(){m({showPassword:!u.showPassword})},onMouseDown:function(e){e.preventDefault()}},u.showPassword?p.a.createElement(Me.a,null):p.a.createElement(Be.a,null)))}))})),Ve=Object(he.a)(Object(be.a)((function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"},textCenter:{textAlign:"center"}}})),Object(w.b)())((function(e){var t=e.classes,a=e.dispatch,n=Object(d.useState)({username:"",password:""}),r=Object(Pe.a)(n,2),c=r[0],i=r[1],o=function(e){return function(t){i(Object(Ae.a)({},c,Object(y.a)({},e,t.target.value)))}};return p.a.createElement(p.a.Fragment,null,p.a.createElement(Ie.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault();var t=c.username,n=c.password;a(function(e){var t=e.username,a=e.password;return function(e,n){return new Promise((function(r,c){B({url:"/login",method:"POST",data:{username:t,password:a},isWithoutToken:!0,dispatch:e,getState:n}).then((function(t){e(R({text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0448\u043b\u0438!",variant:"success"}));var a=t.accessToken,n=t.accessTokenExpiredAt,c=t.refreshToken,i=t.refreshTokenExpiredAt;localStorage.setItem("token-data",JSON.stringify({accessToken:a,accessTokenExpiredAt:n,refreshToken:c,refreshTokenExpiredAt:i})),e(J(t)),e(Z(t)),r(t)})).catch((function(t){e(R({text:t.message,variant:"error"})),c(t)}))}))}}({username:t,password:n}))}},p.a.createElement(Fe,{handleChange:o("username"),value:c.username,id:"username",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",required:!0}),p.a.createElement(qe,{handleChange:o("password"),value:c.password,id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),p.a.createElement(we.a,{color:"primary",variant:"contained",type:"submit"},"\u0412\u043e\u0439\u0442\u0438")),p.a.createElement(Te.a,{className:ze()(t.textCenter,t.form)},"\u0412\u043f\u0435\u0440\u0432\u044b\u0435 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435? ",p.a.createElement(je.b,{to:le},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))})),Xe=Object(he.a)(Object(be.a)((function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"},textCenter:{textAlign:"center"}}})),Object(w.b)(),j.g)((function(e){var t=e.classes,a=e.dispatch,n=e.history,r=Object(d.useState)({username:"",password:"",repeatPassword:"",firstname:"",lastname:"",patronicname:""}),c=Object(Pe.a)(r,2),i=c[0],o=c[1],s=function(e){return function(t){o(Object(Ae.a)({},i,Object(y.a)({},e,t.target.value)))}};return p.a.createElement(p.a.Fragment,null,p.a.createElement(Ie.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault();var t=i.username,r=i.password,c=i.firstname,o=i.lastname,s=i.patronicname;a(function(e){var t=e.username,a=e.password,n=e.firstname,r=e.lastname,c=e.patronicname;return function(e,i){return new Promise((function(o,s){var l={username:t,surName:r,firstName:n,middleName:c,password:a};B({url:"/registration",data:l,method:"POST",isWithoutToken:!0,dispatch:e,getState:i}).then((function(){e(R({text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!",variant:"success"})),o(l)})).catch((function(t){e(R({text:t.message,variant:"error"})),s(t)}))}))}}({username:t,password:r,firstname:c,lastname:o,patronicname:s})).then((function(){return n.push(se)})).catch(console.error)}},p.a.createElement(Fe,{id:"username",handleChange:s("username"),value:i.username,label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",required:!0}),p.a.createElement(Fe,{id:"lastname",handleChange:s("lastname"),value:i.lastname,label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),p.a.createElement(Fe,{id:"firstname",handleChange:s("firstname"),value:i.firstname,label:"\u0418\u043c\u044f"}),p.a.createElement(Fe,{id:"patronicname",handleChange:s("patronicname"),value:i.patronicname,label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"}),p.a.createElement(qe,{id:"password",handleChange:s("password"),value:i.password,label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),p.a.createElement(qe,{id:"repeatPassword",handleChange:s("repeatPassword"),value:i.repeatPassword,label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"}),p.a.createElement(we.a,{color:"primary",variant:"contained",type:"submit"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),p.a.createElement(Te.a,{className:ze()(t.textCenter,t.form)},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",p.a.createElement(je.b,{to:se},"\u0412\u043e\u0439\u0442\u0438")))})),Je=Object(he.a)(Object(be.a)((function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"}}})),Object(w.b)())((function(e){var t=e.classes,a=e.dispatch;return p.a.createElement(Ie.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault(),a(ie())}},p.a.createElement(we.a,{color:"primary",variant:"contained",type:"submit"},"\u0412\u044b\u0439\u0442\u0438"))})),Ze=function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isAuthorized;return p.a.createElement("div",{className:t.wrapper},p.a.createElement(Oe.a,null,p.a.createElement(Te.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u0412\u0430\u0448\u0435 \u0443\u044e\u0442\u043d\u043e\u0435",p.a.createElement("br",null),"\u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e"),a?p.a.createElement(Je,null):p.a.createElement(p.a.Fragment,null,p.a.createElement(j.b,{path:"/",exact:!0,component:Ve}),p.a.createElement(j.b,{path:"/registration",component:Xe}))))}}]),t}(d.PureComponent),Qe=Object(he.a)(Object(be.a)((function(){return{wrapper:{background:'url("/assets/img/background.png") no-repeat',backgroundPosition:"center center",backgroundSize:"cover",width:"100%",flex:"1 1 100%",paddingTop:"40px"}}})),Object(w.b)((function(e){return{isAuthorized:V(e)}})),j.g)(Ze),Ye=a(128),Ke=function(e){return e.news.isLoadingNewsList},$e=function(e){return e.news.isLoadingNewsForm},et=function(e){return e.news.isLoaded},tt=function(e){return e.news.news},at=Object(S.a)("".concat("NEWS","/SET_IS_LOADING_NEWS_LIST")),nt=Object(S.a)("".concat("NEWS","/SET_IS_LOADING_NEWS_FORM")),rt=Object(S.a)("".concat("NEWS","/SET_NEWS_LIST")),ct=Object(S.a)("".concat("NEWS","/APPEND_NEWS")),it=Object(S.a)("".concat("NEWS","/SET_TO_ZERO_NEWS_LIST")),ot=(Object(S.a)("".concat("NEWS","/SET_IS_LOADED")),Object(C.a)(Object(y.a)({},at,(function(e,t){return t.payload})),!1)),st=Object(C.a)(Object(y.a)({},nt,(function(e,t){return t.payload})),!1),lt=Object(C.a)(Object(y.a)({},rt,(function(e,t){return!0})),!1),ut=Object(C.a)((o={},Object(y.a)(o,rt,(function(e,t){return t.payload})),Object(y.a)(o,ct,(function(e,t){return[t.payload].concat(Object(P.a)(e))})),Object(y.a)(o,it,(function(){return[]})),o),[]),mt=Object(k.c)({isLoadingNewsList:ot,isLoadingNewsForm:st,isLoaded:lt,news:ut}),dt=function(e){var t=e.title,a=e.text;return function(e,n){return new Promise((function(r,c){var i={title:t,text:a};e(nt(!0)),B({url:"/news",method:"POST",data:i,getState:n,dispatch:e}).then((function(t){e(rt(t)),r(t)})).catch((function(e){c(e)})).finally((function(){return e(nt(!1))}))}))}},pt=function(e){var t=e.id,a=e.title,n=e.text;return function(e,r){return new Promise((function(c,i){var o={title:a,text:n};e(nt(!0)),B({url:"/news/".concat(t),method:"PATCH",data:o,getState:r,dispatch:e}).then((function(t){e(rt(t)),c(t)})).catch((function(e){i(e)})).finally((function(){return e(nt(!1))}))}))}},ft=a(402),ht=a(403),bt=a(425),gt=a(404),Et=a(405),Ot=function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},card:{marginBottom:e.spacing(2)}}},vt=Object(Ye.a)(Ot)((function(e){var t=e.classes,a=e.post,n=e.dispatch,r=e.permission,c=!!Se()(r,"news.U",!1),i=!!Se()(r,"news.D",!1);return p.a.createElement(ft.a,{className:t.card},p.a.createElement(ht.a,{avatar:p.a.createElement(bt.a,{"aria-label":"recipe",src:a.user.image||"/assets/img/no-user-image.png",alt:a.user.username}),title:a.title,subheader:a.created_at}),p.a.createElement(gt.a,null,p.a.createElement(Te.a,{variant:"body2",color:"textSecondary",component:"p"},a.text)),p.a.createElement(Et.a,null,c&&p.a.createElement(xe,{path:"/news/".concat(a.id,"/edit")},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),i&&p.a.createElement(we.a,{onClick:function(){n(function(e){var t=e.id;return function(e,a){return new Promise((function(n,r){e(at(!0)),B({url:"/news/".concat(t),method:"DELETE",getState:a,dispatch:e}).then((function(t){e(rt(t)),n(t)})).catch((function(e){r(e)})).finally((function(){return e(at(!1))}))}))}}({id:a.id}))}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))})),jt=Object(he.a)(Object(Ye.a)(Ot),Object(w.b)((function(e){return{permission:z(e)}})))(vt),wt=function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)((function(e,t){et(t())||(e(at(!0)),B({url:"/news",method:"GET",getState:t,dispatch:e}).then((function(t){return e(rt(t))})).catch((function(e){return console.log(e)})).finally((function(){return e(at(!1))})))}))}},{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.isLoaded,n=e.news,r=e.permission,c=!!Se()(r,"news.C",!1);return p.a.createElement(p.a.Fragment,null,c&&p.a.createElement(xe,{color:"primary",path:"".concat(ue,"/add")},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),p.a.createElement("div",null,t?p.a.createElement("div",null,"Loading..."):null,a?n.length?n.map((function(e){return p.a.createElement(jt,{post:e,key:e.id})})):p.a.createElement("div",null,"\u041d\u0435\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439"):null))}}]),t}(d.PureComponent),Nt=Object(w.b)((function(e){return{isLoading:Ke(e),isLoaded:et(e),news:tt(e),permission:z(e)}}),null)(wt),xt=a(406),yt=a(426),St=a(409),Ct=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(E.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",text:"",createdAt:new Date,user:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(y.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.title,r=t.text,c=a.props,i=c.history,o=c.dispatch,s=c.match;o(s.params.id?pt({title:n,text:r,id:s.params.id}):dt({title:n,text:r})).then((function(){return i.push(ue)}))},a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.newsList;if(t.params.id){var n=a.find((function(e){return e.id===t.params.id})),r=n.title,c=n.text,i=n.created_at,o=n.user;this.setState({title:r,text:c,createdAt:i,user:o.username})}}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.title,n=t.text,r=t.createdAt,c=t.user;return p.a.createElement(Ie.a,{className:e.formCard,component:"form",onSubmit:this.handleSubmit},p.a.createElement(xt.a,{container:!0,spacing:2},p.a.createElement(xt.a,{item:!0,xs:4},p.a.createElement(yt.a,{label:"\u0410\u0432\u0442\u043e\u0440",value:c,onChange:this.handleChange,className:e.textField,margin:"normal",disabled:!0,fullWidth:!0}),p.a.createElement(yt.a,{label:"\u0414\u0430\u0442\u0430",value:r,onChange:this.handleChange,className:e.textField,margin:"normal",disabled:!0,fullWidth:!0}),p.a.createElement(yt.a,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:"title",value:a,onChange:this.handleChange,className:e.textField,margin:"normal",fullWidth:!0})),p.a.createElement(xt.a,{item:!0,xs:8},p.a.createElement(yt.a,{label:"\u0422\u0435\u043a\u0441\u0442",name:"text",value:n,onChange:this.handleChange,className:e.textField,margin:"normal",multiline:!0,fullWidth:!0,rows:5}),p.a.createElement(St.a,null,p.a.createElement(we.a,{variant:"contained",color:"secondary",type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),p.a.createElement(xe,{path:"/news",variant:"contained"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))))}}]),t}(d.PureComponent),kt=Object(he.a)(Object(Ye.a)((function(e){return{formCard:{padding:e.spacing(2)},textField:{display:"block",width:"100%"}}})),j.g,Object(w.b)((function(e){return{isLoading:$e(e),newsList:tt(e)}}),null))(Ct),Tt=function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.classes;return p.a.createElement("div",{className:e.wrapper},p.a.createElement(Oe.a,null,p.a.createElement(Te.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"),p.a.createElement(j.b,{path:"/news",exact:!0,component:Nt}),p.a.createElement(j.b,{path:"/news/add",component:kt}),p.a.createElement(j.b,{path:"/news/:id/edit",component:kt})))}}]),t}(d.PureComponent),At=Object(Ye.a)((function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"}}}))(Tt),Pt=a(196),It=a.n(Pt),_t=null,Rt=function(e){return e.chat.users},Dt=function(e){return e.chat.messages},Lt=function(e){return e.chat.selectedRoom},Ut=function(e){return e.chat.messageText},Ft=Object(S.a)("".concat("CHAT","/SET_USERS")),Ht=Object(S.a)("".concat("CHAT","/ADD_USER")),Wt=Object(S.a)("".concat("CHAT","/UPDATE_USER")),Mt=Object(S.a)("".concat("CHAT","/REMOVE_USER")),Bt=Object(S.a)("".concat("CHAT","/ADD_MESSAGE")),Gt=Object(S.a)("".concat("CHAT","/SET_ROOM_HISTORY")),zt=Object(S.a)("".concat("CHAT","/SET_TO_ZERO_MESSAGES")),qt=Object(S.a)("".concat("CHAT","/SET_SELECTED_ROOM")),Vt=Object(S.a)("".concat("CHAT","/SET_MESSAGE_TEXT")),Xt=Object(S.a)("".concat("CHAT","/RESET_MESSAGE")),Jt=Object(C.a)((s={},Object(y.a)(s,Ft,(function(e,t){return t.payload})),Object(y.a)(s,Ht,(function(e,t){return[t.payload].concat(Object(P.a)(e))})),Object(y.a)(s,Wt,(function(e,t){return e.map((function(e){return e.userId===t.payload.userId?t.payload:e}))})),Object(y.a)(s,Mt,(function(e,t){return e.filter((function(e){return e.socketId!==t.payload}))})),s),[]),Zt=Object(C.a)((l={},Object(y.a)(l,Bt,(function(e,t){return[].concat(Object(P.a)(e),[t.payload])})),Object(y.a)(l,Gt,(function(e,t){return t.payload})),Object(y.a)(l,zt,(function(){return[]})),l),[]),Qt=Object(C.a)(Object(y.a)({},qt,(function(e,t){return t.payload})),null),Yt=Object(C.a)((u={},Object(y.a)(u,Vt,(function(e,t){return t.payload})),Object(y.a)(u,Xt,(function(){return""})),u),""),Kt=Object(k.c)({users:Jt,messages:Zt,selectedRoom:Qt,messageText:Yt}),$t=function(){return function(e,t){var a=t(),n=G(a),r=Lt(a),c=Ut(a);_t.emit("message:add",{senderId:n.id,recipientId:r.recipientId,roomId:r.socketId,text:c}),e(Xt())}},ea=a(410),ta=a(408),aa=a(369),na=a(411),ra=Object(he.a)(Object(Ye.a)((function(e){return{column:{height:"calc(100vh - 80px)",display:"flex",flexDirection:"column"}}})),Object(w.b)((function(e){return{users:Rt(e),selectedRoom:Lt(e)}})))((function(e){var t=e.classes,a=e.users,n=e.selectedRoom,r=e.dispatch,c=function(e){r(function(e){var t=e.userId,a=e.socketId;return function(e,n){var r=G(n());e(zt()),e(qt({recipientId:t,socketId:a})),_t.emit("message:history",{recipientId:t,userId:r.id})}}({userId:e.userId,socketId:e.socketId}))};return p.a.createElement(Ie.a,{className:t.column,square:!0},p.a.createElement(ht.a,{title:p.a.createElement(Te.a,{variant:"h5"},"\u041b\u0438\u0447\u043d\u044b\u0435 \u0447\u0430\u0442\u044b")}),p.a.createElement(ea.a,null),p.a.createElement(ta.a,null,a.map((function(e,t){return p.a.createElement(aa.a,{button:!0,key:e.userId,selected:e.userId===n&&n.userId,onClick:function(){return c(e)}},p.a.createElement(na.a,{primary:e.username}))}))))})),ca=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(E.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){(0,a.props.dispatch)(Vt(e.target.value))},a.handleSubmit=function(e){e.preventDefault(),(0,a.props.dispatch)($t())},a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.messages,n=e.messageText,r=e.userId,c=e.permission,i=!!Se()(c,"chat.C",!1);return p.a.createElement(p.a.Fragment,null,p.a.createElement(gt.a,{className:t.chatArea},p.a.createElement(xt.a,{container:!0,direction:"column",wrap:"nowrap"},a.map((function(e,a){return p.a.createElement(xt.a,{item:!0,key:a,className:ze()(t.messageContainer,e.senderId!==r?t.isMyMessage:t.isAnotherMessage)},p.a.createElement(ft.a,{className:ze()(t.message,e.senderId!==r?t.messagePrimary:t.messageSecondary)},e.text))})))),i&&p.a.createElement(Et.a,null,p.a.createElement("form",{onSubmit:this.handleSubmit,className:t.form},p.a.createElement(yt.a,{label:"Label",style:{margin:8},fullWidth:!0,margin:"normal",variant:"filled",InputLabelProps:{shrink:!0},value:n,onChange:this.handleChange}),p.a.createElement(we.a,{variant:"contained",color:"primary",type:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))}}]),t}(d.PureComponent),ia=Object(he.a)(Object(Ye.a)((function(e){return{messageContainer:{marginBottom:e.spacing(2)},message:{padding:e.spacing(1)},messagePrimary:{backgroundColor:e.palette.grey.A700},messageSecondary:{backgroundColor:e.palette.secondary.main},isMyMessage:{alignSelf:"end"},isAnotherMessage:{alignSelf:"flex-end"},chatArea:{height:"100%",overflowY:"scroll"},form:{display:"flex",alignItems:"center",width:"100%"}}})),Object(w.b)((function(e){return{messageText:Ut(e),userId:G(e).id,permission:z(e)}})))(ca),oa=function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)((function(e,t){var a=G(t());(_t=It()("http://localhost:5000")).emit("users:connect",{userId:a.id,username:a.username}),_t.on("users:list",(function(t){return e(Ft(t))})).on("users:add",(function(t){return e(Ht(t))})).on("users:leave",(function(a){e(Mt(a));var n=Lt(t());n&&n.socketId===a&&e(qt(null))})).on("message:history",(function(t){return e(Gt(t))})).on("message:add",(function(t){return e(Bt(t))}))}))}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)((function(e){_t&&_t.disconnect(),e(Ft([])),e(zt()),e(qt(null)),e(Xt())}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.users,n=e.messages,r=e.selectedRoom;return p.a.createElement("div",{className:t.wrapper},p.a.createElement(Oe.a,null,p.a.createElement(xt.a,{container:!0,spacing:1},p.a.createElement(xt.a,{item:!0,xs:4},p.a.createElement(ra,{users:a,selected:r})),p.a.createElement(xt.a,{item:!0,xs:8},p.a.createElement(ft.a,{className:t.column,square:!0},r?p.a.createElement(ia,{messages:n}):p.a.createElement("div",{className:t.empty},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0430\u0442"))))))}}]),t}(d.PureComponent),sa=Object(he.a)(Object(Ye.a)((function(e){return{toolbar:e.mixins.toolbar,column:{height:"calc(100vh - 80px)",display:"flex",flexDirection:"column"},wrapper:{width:"100%",flex:"1 1 100%",paddingTop:e.spacing(1)},empty:{padding:e.spacing(3)}}})),Object(w.b)((function(e){return{users:Rt(e),selectedRoom:Lt(e),messages:Dt(e)}})))(oa),la=a(197),ua=a.n(la),ma=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(E.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={firstName:"",middleName:"",surName:"",oldPassword:"",newPassword:"",confirmPassword:"",image:"",fileRef:p.a.createRef()},a.cancelHandler=function(){var e=a.props.userProfile;a.setState({firstName:e.firstName,middleName:e.middleName,surName:e.surName,oldPassword:"",newPassword:"",confirmPassword:"",image:e.image})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(y.a)({},n,r))},a.handleChangeFile=function(){var e=a.state.fileRef,t=new FileReader;t.onload=function(e){a.setState({image:e.target.result})},e.current.files[0]&&t.readAsDataURL(e.current.files[0])},a.submitHandler=function(){var e=a.props.dispatch,t=a.state,n=t.firstName,r=t.surName,c=t.middleName,i=t.oldPassword,o=t.newPassword,s=t.fileRef;e(oe({firstName:n,surName:r,middleName:c,oldPassword:i,newPassword:o,avatar:s.current.files[0]||null})).then((function(){a.cancelHandler()}))},a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.userProfile;this.setState({firstName:e.firstName,middleName:e.middleName,surName:e.surName,image:e.image})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isLoading,n=this.state,r=n.firstName,c=n.surName,i=n.middleName,o=n.oldPassword,s=n.newPassword,l=n.confirmPassword,u=n.image,m=n.fileRef;return p.a.createElement("div",{className:t.wrapper},p.a.createElement(Oe.a,null,p.a.createElement(Ie.a,{className:t.formCard},p.a.createElement(xt.a,{container:!0,spacing:2},p.a.createElement(xt.a,{item:!0,xs:4},p.a.createElement(ua.a,{className:t.avatarPreviewWrapper},p.a.createElement(bt.a,{className:t.avatarPreview,src:u||"/assets/img/no-user-image-big.png"})),p.a.createElement(we.a,{className:t.uploadButton,variant:"contained",component:"label",color:"primary"},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b",p.a.createElement("input",{type:"file",style:{display:"none"},ref:m,onChange:this.handleChangeFile}))),p.a.createElement(xt.a,{item:!0,xs:8},p.a.createElement(xt.a,{container:!0,direction:"column",style:{height:"100%"}},p.a.createElement(Te.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),p.a.createElement("div",{className:t.form},p.a.createElement(yt.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",className:t.textField,margin:"normal",name:"surName",value:c,onChange:this.handleChange}),p.a.createElement(yt.a,{label:"\u0418\u043c\u044f",className:t.textField,margin:"normal",name:"firstName",value:r,onChange:this.handleChange}),p.a.createElement(yt.a,{label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",className:t.textField,margin:"normal",name:"middleName",value:i,onChange:this.handleChange})),p.a.createElement(Te.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u041f\u0430\u0440\u043e\u043b\u044c"),p.a.createElement("div",{className:t.form},p.a.createElement(qe,{label:"\u0421\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",className:t.textField,name:"oldPassword",value:o,handleChange:this.handleChange}),p.a.createElement(qe,{label:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",className:t.textField,name:"newPassword",value:s,handleChange:this.handleChange}),p.a.createElement(qe,{label:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",className:t.textField,name:"confirmPassword",value:l,handleChange:this.handleChange})),p.a.createElement(Et.a,{className:t.formActions},p.a.createElement(we.a,{color:"primary",variant:"contained",disabled:a,onClick:this.submitHandler},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),p.a.createElement(we.a,{variant:"outlined",onClick:this.cancelHandler,disabled:a},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"))))))))}}]),t}(d.PureComponent),da=Object(he.a)(Object(Ye.a)((function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},formCard:{padding:e.spacing(2)},avatarPreview:{width:"100%",height:"100%",borderRadius:"8px"},avatarPreviewWrapper:{marginBottom:e.spacing(2),width:"100%"},uploadButton:{display:"block",textAlign:"center"},form:{display:"flex",flexWrap:"wrap",marginBottom:e.spacing(3)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},formActions:{marginTop:"auto",padding:0}}})),Object(w.b)((function(e){return{userProfile:G(e),isLoading:X(e)}})))(ma),pa=a(135),fa=a.n(pa),ha=function(e){return e.adminPanel.isLoadingUsers},ba=function(e){return e.adminPanel.users},ga=Object(S.a)("".concat("ADMIN_PANEL","/SET_IS_LOADING_USERS")),Ea=Object(S.a)("".concat("ADMIN_PANEL","/SET_IS_LOADING_FORM")),Oa=Object(S.a)("".concat("ADMIN_PANEL","/SET_USERS")),va=Object(S.a)("".concat("ADMIN_PANEL","/SET_TO_ZERO_USERS")),ja=Object(C.a)(Object(y.a)({},ga,(function(e,t){return t.payload})),!1),wa=Object(C.a)(Object(y.a)({},Ea,(function(e,t){return t.payload})),!1),Na=Object(C.a)((m={},Object(y.a)(m,Oa,(function(e,t){return t.payload})),Object(y.a)(m,va,(function(){return[]})),m),[]),xa=Object(k.c)({isLoadingUsers:ja,isLoadingForm:wa,users:Na}),ya=function(){return function(e,t){e(ga(!0)),B({url:"/users",getState:t,dispatch:e}).then((function(t){e(Oa(t))})).catch((function(e){return R({text:e.message,variant:"error"})})).finally((function(){return e(ga(!1))}))}},Sa=function(e,t){return function(a,n){return new Promise((function(r){a(Ea(!0)),B({url:"/users/".concat(e,"/permission"),method:"PATCH",data:{permission:t},getState:n,dispatch:a}).then((function(){R({text:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e!",variant:"success"}),a(ya()),Se()(G(n()),"id",null)===e&&a(re()),r(!0)})).catch((function(e){R({text:e.message,variant:"error"})})).finally((function(){return a(Ea(!1))}))}))}},Ca=function(e){return function(t,a){return new Promise((function(n){t(Ea(!0)),B({url:"/users/".concat(e),method:"DELETE",getState:a,dispatch:t}).then((function(e){t(ya()),n(!0)})).catch((function(e){R({text:e.message,variant:"error"})})).finally((function(){return t(Ea(!1))}))}))}},ka=a(419),Ta=a(414),Aa=a(198),Pa=a(412),Ia=a(413),_a=a(422),Ra=function(e){var t=e.handleChange,a=e.values,n=e.label;return p.a.createElement(p.a.Fragment,null,p.a.createElement(Te.a,{variant:"h5",component:"h3",gutterBottom:!0},n),p.a.createElement(Pa.a,null,p.a.createElement(Ia.a,{control:p.a.createElement(_a.a,{checked:a.C,value:"create",onChange:t("C")}),label:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435"}),p.a.createElement(Ia.a,{control:p.a.createElement(_a.a,{checked:a.R,value:"read",onChange:t("R")}),label:"\u0427\u0442\u0435\u043d\u0438\u0435"}),p.a.createElement(Ia.a,{control:p.a.createElement(_a.a,{checked:a.U,value:"update",onChange:t("U")}),label:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),p.a.createElement(Ia.a,{control:p.a.createElement(_a.a,{checked:a.D,value:"delete",onChange:t("D")}),label:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435"})))},Da={selectedUserId:"",selectedUser:null,permission:{chat:{C:!0,R:!0,U:!1,D:!1},news:{C:!0,R:!0,U:!1,D:!1},settings:{C:!0,R:!0,U:!1,D:!1}}},La=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(E.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state=Da,a.handleChange=function(e){return function(t){return function(n){var r=n.target.checked,c=a.state.permission;a.setState({permission:Object(Ae.a)({},c,Object(y.a)({},e,Object(Ae.a)({},c[e],Object(y.a)({},t,r))))})}}},a.handleChangeUser=function(e){var t=a.props.users,n=e.target.value,r=n?fa()(t.find((function(e){return e.id===n}))):null;a.setState({selectedUserId:n,selectedUser:r,permission:r.permission})},a.submitHandler=function(){var e=a.state,t=e.permission,n=e.selectedUserId;(0,a.props.dispatch)(Sa(n,t))},a.cancelHandler=function(){var e=a.props.users,t=a.state.selectedUserId,n=fa()(e.find((function(e){return e.id===t})));t&&a.setState({selectedUser:n,permission:n.permission})},a.deleteHandler=function(){var e=a.state.selectedUserId,t=a.props.dispatch;e&&t(Ca(e)).then((function(){return a.setState(Da)}))},a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(ya())}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.users,n=this.state,r=n.selectedUserId,c=n.selectedUser;return p.a.createElement("div",{className:t.wrapper},p.a.createElement(Oe.a,null,p.a.createElement(Ie.a,{className:t.formCard},p.a.createElement(xt.a,{container:!0,wrap:"nowrap",alignItems:"center",className:t.mb3},p.a.createElement(bt.a,{src:c&&c.image||"/assets/img/no-user-image.png",className:t.userAvatar}),p.a.createElement(_e.a,{className:t.userSelect},p.a.createElement(Re.a,{htmlFor:"age-simple"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),p.a.createElement(ka.a,{value:r,onChange:this.handleChangeUser},p.a.createElement(Ta.a,{value:null},"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"),a.map((function(e){return p.a.createElement(Ta.a,{value:e.id,key:e.id},e.username)}))))),c&&this.renderForms())))}},{key:"renderForms",value:function(){var e=this.props.classes,t=this.state.permission;return p.a.createElement(p.a.Fragment,null,p.a.createElement(xt.a,{container:!0,spacing:2,className:e.mb3},p.a.createElement(xt.a,{item:!0,xs:4},p.a.createElement(Ra,{label:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u044b",values:t.settings,handleChange:this.handleChange("settings")})),p.a.createElement(xt.a,{item:!0,xs:4},p.a.createElement(Ra,{label:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438",values:t.news,handleChange:this.handleChange("news")})),p.a.createElement(xt.a,{item:!0,xs:4},p.a.createElement(Ra,{label:"\u0427\u0430\u0442",values:t.chat,handleChange:this.handleChange("chat")}))),p.a.createElement(xt.a,{container:!0,spacing:2,justify:"center",alignItems:"center"},p.a.createElement(St.a,null,p.a.createElement(we.a,{variant:"contained",color:"secondary",onClick:this.submitHandler},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),p.a.createElement(we.a,{variant:"contained",onClick:this.cancelHandler},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),p.a.createElement(we.a,{variant:"contained",onClick:this.deleteHandler},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"))))}}]),t}(d.PureComponent),Ua=Object(he.a)(Object(Aa.withStyles)((function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},formCard:{padding:e.spacing(2)},userSelect:{width:"100%"},userAvatar:{marginRight:e.spacing(2)},mb3:{marginBottom:e.spacing(3)}}})),Object(w.b)((function(e){return{isLoading:ha(e),users:ba(e)}})))(La),Fa=a(137),Ha=a(3),Wa=a(199),Ma=a.n(Wa),Ba=a(201),Ga=a.n(Ba),za=a(202),qa=a.n(za),Va=a(204),Xa=a.n(Va),Ja=a(106),Za=a(415),Qa=a(428),Ya=a(416),Ka=a(200),$a=a.n(Ka),en=a(203),tn={success:Ma.a,warning:$a.a,error:Ga.a,info:qa.a},an=Object(en.a)((function(e){return{success:{backgroundColor:Ja.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:Za.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function nn(e){var t=an(),a=e.className,n=e.message,r=e.onClose,c=e.variant,i=Object(Fa.a)(e,["className","message","onClose","variant"]),o=tn[c];return p.a.createElement(Ya.a,Object.assign({className:Object(Ha.a)(t[c],a),"aria-describedby":"client-snackbar",message:p.a.createElement("span",{id:"client-snackbar",className:t.message},p.a.createElement(o,{className:Object(Ha.a)(t.icon,t.iconVariant)}),n),action:[p.a.createElement(He.a,{key:"close","aria-label":"close",color:"inherit",onClick:r},p.a.createElement(Xa.a,{className:t.icon}))]},i))}var rn=function(e){var t={openNotification:R,closeNotification:D};return Object(w.b)((function(e){return{notifications:L(e)}}),t)((function(t){var a=t.openNotification,n=t.closeNotification,r=t.notifications,c=Object(Fa.a)(t,["openNotification","closeNotification","notifications"]),i=function(e){return function(t,a){"clickaway"!==a&&n(e)}},o=r.find((function(e){return!!e.isActive}));return p.a.createElement(p.a.Fragment,null,p.a.createElement(e,Object.assign({},c,{openNotification:a})),o&&p.a.createElement(Qa.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!0,autoHideDuration:2500,onClose:i(o.id)},p.a.createElement(nn,{onClose:i(o.id),variant:o.variant,message:o.text})))}))},cn=function(){return{root:{display:"flex",flexDirection:"column",height:"100%",minHeight:"100vh",backgroundColor:"#f5f5f5"},container:{flex:"1 1 100%",display:"flex",flexDirection:"column"},mainLayoutWrapper:{background:'url("/assets/img/another-background.png") no-repeat',backgroundPosition:"center center",backgroundSize:"cover",width:"100%",flex:"1 1 100%",display:"flex",alignItems:"stretch"}}},on=Object(be.a)(cn)((function(e){var t=e.children,a=e.classes;return p.a.createElement("div",{className:a.mainLayoutWrapper},t)})),sn=function(e){return rn(function(e){return function(t){return p.a.createElement(on,null,p.a.createElement(e,t))}}(e))},ln=function(e){function t(){return Object(b.a)(this,t),Object(E.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(re())}},{key:"render",value:function(){var e=this.props.classes;return p.a.createElement("div",{className:e.root},p.a.createElement(ke,null),p.a.createElement(ge.a,{className:e.container},p.a.createElement(j.d,null,p.a.createElement(j.b,{path:se,exact:!0,component:rn(Qe)}),p.a.createElement(j.b,{path:le,component:rn(Qe)}),p.a.createElement(fe,{permissionPath:"news",path:ue,component:sn(At)}),p.a.createElement(fe,{permissionPath:"chat",path:me,component:sn(sa)}),p.a.createElement(fe,{path:de,component:sn(da)}),p.a.createElement(fe,{permissionPath:"settings",path:pe,component:sn(Ua)}))))}}]),t}(d.PureComponent),un=Object(he.a)(Object(be.a)(cn),Object(w.b)())(ln),mn=a(417),dn=a(189),pn=a(105),fn=a(208),hn=Object(fn.a)({palette:{primary:{main:"#63c1a0"},secondary:{main:"#19857b"},error:{main:pn.a.A400},background:{default:"rgba(255, 255, 255, .87)"}}}),bn=a(207),gn=Object(k.c)({auth:ne,notifications:F,news:mt,adminPanel:xa,chat:Kt}),En=function(){return Object(k.e)(gn,Object(k.d)(Object(k.a)(bn.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}))};h.a.render(p.a.createElement(dn.a,{theme:hn},p.a.createElement(mn.a,null),p.a.createElement(w.a,{store:En()},p.a.createElement(je.a,null,p.a.createElement(un,null)))),document.getElementById("root"))}},[[220,1,2]]]);
//# sourceMappingURL=main.6c8a1dbd.chunk.js.map